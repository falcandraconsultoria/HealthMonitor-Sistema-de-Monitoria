<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>Dashboard de Monitoria em Sa√∫de</title>

  <!-- Bibliotecas -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- √çcones -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    :root{
      --bg:#0F172A;
      --card:#1E293B;
      --primary:#38BDF8;
      --mint:#2DD4BF;
      --text-main:#F1F5F9;
      --text-soft:#CBD5E1;

      /* üîπ CORES DEFINIDAS NOS PROMPTS */
      --icon-highlight:#FB8C00;
      --number-highlight:#8E24AA;
    }

    body{
      margin:0;
      font-family:"Segoe UI",Roboto,Arial,sans-serif;
      background:var(--bg);
      color:var(--text-main);
    }

    /* ================= HEADER ================= */
    header{
      position:sticky;
      top:0;
      z-index:100;
      padding:14px 28px;
      display:flex;
      align-items:center;
      gap:14px;
      background:linear-gradient(90deg,#0F172A,#111827);
      box-shadow:0 8px 25px rgba(0,0,0,.5);
    }

    header img{ height:42px }

    header h1{
      margin:0;
      font-size:20px;
      font-weight:600;
    }

    header span{
      font-size:12px;
      color:var(--text-soft);
    }

    .container{ padding:28px }

    /* ================= FILTROS ================= */
    .filtros{
      display:grid;
      grid-template-columns:1.5fr repeat(4,1fr);
      gap:14px;
      margin-bottom:26px;
      align-items:end;
    }

    .filtro-box{
      display:flex;
      flex-direction:column;
      gap:6px;
    }

    .filtro-box label{
      font-size:12px;
      color:var(--text-soft);
    }

    .filtros input,
    .filtros select{
      background:#020617;
      color:#fff;
      border:1px solid #334155;
      border-radius:10px;
      padding:10px 12px;
      font-weight:600;
    }

    .fonte-descricao{
      font-size:11px;
      color:var(--text-soft);
      margin-top:4px;
      line-height:1.4;
    }

    .download-btn{
      background:var(--icon-highlight);
      border:none;
      border-radius:10px;
      padding:10px 14px;
      cursor:pointer;
      color:#fff;
      font-size:16px;
      height:44px;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .download-btn:hover{
      opacity:.9;
    }

    /* ================= CARDS ================= */
    .cards{
      display:grid;
      grid-template-columns:repeat(5,1fr);
      gap:16px;
      margin-bottom:28px;
    }

    .card{
      background:var(--card);
      border-radius:12px;
      padding:18px;
      text-align:center;
      box-shadow:0 10px 25px rgba(0,0,0,.4);
    }

    .card i{
      font-size:20px;
      color:var(--icon-highlight);
      margin-bottom:6px;
    }

    .card h3{
      font-size:13px;
      margin:6px 0;
      color:var(--text-soft);
      font-weight:500;
    }

    .card span{
      font-size:30px;
      font-weight:800;
      color:var(--number-highlight);
    }

    /* ================= GR√ÅFICOS ================= */
    .grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:20px;
      margin-bottom:20px;
    }

    .box{
      background:var(--card);
      border-radius:14px;
      padding:18px;
      box-shadow:0 15px 35px rgba(0,0,0,.45);
    }

    .box h4{
      margin:0 0 12px;
      font-size:14px;
      font-weight:600;
      color:var(--text-main);
    }

    canvas{
      width:100%!important;
      height:300px!important;
    }

    footer{
      text-align:center;
      padding:18px;
      color:#64748b;
      font-size:13px;
    }
  </style>
</head>

<body>

<header>
  <img src="assets/logo-falcandra.png" alt="Falcandra Data Consulting">
  <div>
    <h1>Dashboard de Monitoria em Sa√∫de</h1>
    <span>Falcandra Data Consulting</span>
  </div>
</header>

<div class="container">

  <!-- ================= FILTROS ================= -->
  <div class="filtros">
    <div class="filtro-box">
      <label>Fonte de Dados</label>
      <input type="file" id="excelFile" accept=".xlsx,.xls">
      <div class="fonte-descricao">
        Carregue um ficheiro Excel (.xlsx) com dados de atendimentos em sa√∫de,
        incluindo data da consulta, sexo, prov√≠ncia, distrito, servi√ßo, tipo de
        consulta e diagn√≥stico.
      </div>
    </div>

    <div class="filtro-box">
      <label>Prov√≠ncia</label>
      <select id="filtroProvincia"></select>
    </div>

    <div class="filtro-box">
      <label>Distrito</label>
      <select id="filtroDistrito"></select>
    </div>

    <div class="filtro-box">
      <label>Servi√ßo</label>
      <select id="filtroServico"></select>
    </div>

    <div class="filtro-box">
      <label>Ano</label>
      <select id="filtroAno"></select>
    </div>

    <!-- üîπ BOT√ÉO DOWNLOAD (SEM TEXTO) -->
    <button class="download-btn" title="Baixar gr√°ficos em PNG">
      <i class="fa-solid fa-download"></i>
    </button>
  </div>

  <!-- ================= CARDS ================= -->
  <div class="cards">
    <div class="card">
      <i class="fa-solid fa-users"></i>
      <h3>Total Atendimentos</h3>
      <span id="cardTotal">0</span>
    </div>
    <div class="card">
      <i class="fa-solid fa-stethoscope"></i>
      <h3>Primeira Consulta</h3>
      <span id="cardPrimeira">0</span>
    </div>
    <div class="card">
      <i class="fa-solid fa-rotate"></i>
      <h3>Seguimento</h3>
      <span id="cardSeguimento">0</span>
    </div>
    <div class="card">
      <i class="fa-solid fa-percent"></i>
      <h3>Taxa Seguimento</h3>
      <span id="cardTaxaSeguimento">0%</span>
    </div>
    <div class="card">
      <i class="fa-solid fa-heart-pulse"></i>
      <h3>Reten√ß√£o</h3>
      <span id="cardRetencao">0%</span>
    </div>
  </div>

  <!-- ================= GR√ÅFICOS ================= -->
  <div class="box">
    <h4>Atendimentos Mensais</h4>
    <canvas id="grafMensal"></canvas>
  </div>

  <div class="grid">
    <div class="box">
      <h4>Distribui√ß√£o por Sexo</h4>
      <canvas id="grafSexo"></canvas>
    </div>
    <div class="box">
      <h4>Diagn√≥sticos mais Frequentes</h4>
      <canvas id="grafDiagnostico"></canvas>
    </div>
  </div>

  <div class="grid">
    <div class="box">
      <h4>Produtividade por M√©dico</h4>
      <canvas id="grafMedico"></canvas>
    </div>
    <div class="box">
      <h4>Produtividade por Servi√ßo</h4>
      <canvas id="grafServico"></canvas>
    </div>
  </div>

  <div class="box">
    <h4>Produtividade por Distrito</h4>
    <canvas id="grafDistrito"></canvas>
  </div>

</div>

<footer>
  ¬© Falcandra Data Consulting ¬∑ HealthMonitor
</footer>

<script src="js/main.js"></script>
</body>
</html>
